{"version":3,"file":"index.js","sources":["../share/index.js","dev/index.js"],"sourcesContent":["export function sleep(ms = 0) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function query(el, doc = document) {\n    return doc.querySelector(el);\n}\n\nexport function download(url, name) {\n    const elink = document.createElement('a');\n    elink.style.display = 'none';\n    elink.href = url;\n    elink.download = name;\n    document.body.appendChild(elink);\n    elink.click();\n    document.body.removeChild(elink);\n}\n\nexport function getActiveTab() {\n    return new Promise(resolve => {\n        chrome.tabs.query(\n            {\n                active: true,\n                currentWindow: true,\n            },\n            tabs => {\n                resolve(tabs[0]);\n            },\n        );\n    });\n}\n\nexport function getStorage(key, defaultValue) {\n    return new Promise(resolve => {\n        chrome.storage.local.get([key], result => {\n            if (result[key]) {\n                resolve(result[key]);\n            } else if (defaultValue) {\n                setStorage(key, defaultValue).then(value => {\n                    resolve(value);\n                });\n            } else {\n                resolve();\n            }\n        });\n    });\n}\n\nexport function setStorage(key, value) {\n    return new Promise(resolve => {\n        chrome.storage.local.set(\n            {\n                [key]: value,\n            },\n            () => {\n                resolve(value);\n            },\n        );\n    });\n}\n\nexport function openTab(url) {\n    return new Promise(resolve => {\n        chrome.tabs.query({}, function(tabs) {\n            const findTab = tabs.find(tab => tab.url === url);\n            if (findTab) {\n                chrome.tabs.update(\n                    findTab.id,\n                    {\n                        active: false,\n                        url: url,\n                    },\n                    tab => {\n                        resolve(tab);\n                    },\n                );\n            } else {\n                chrome.tabs.create({ url, active: false }, tab => {\n                    resolve(tab);\n                });\n            }\n        });\n    });\n}\n\nexport function openWindowTab(url) {\n    return new Promise(resolve => {\n        chrome.windows.create(\n            {\n                url,\n                focused: true,\n            },\n            win => {\n                resolve(win);\n            },\n        );\n    });\n}\n\nexport function activeTab(id) {\n    return new Promise(resolve => {\n        chrome.tabs.update(\n            id,\n            {\n                active: true,\n            },\n            tab => {\n                resolve(tab);\n            },\n        );\n    });\n}\n","import { sleep } from '../../share';\n\nconst $script = document.createElement('script');\n$script.src = chrome.extension.getURL('injected/index.js');\n$script.onload = () => $script.remove();\ndocument.documentElement.appendChild($script);\n\nconst $style = document.createElement('link');\n$style.rel = 'stylesheet';\n$style.type = 'text/css';\n$style.href = chrome.extension.getURL('injected/index.css');\nsleep().then(() => document.head.appendChild($style));\n"],"names":["sleep","ms","Promise","resolve","setTimeout","$script","document","createElement","src","chrome","extension","getURL","onload","remove","documentElement","appendChild","$style","rel","type","href","then","head"],"mappings":";;;EAAO,SAASA,KAAT,GAAuB;EAAA,MAARC,EAAQ,uEAAH,CAAG;EAC1B,SAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO;EAAA,WAAIC,UAAU,CAACD,OAAD,EAAUF,EAAV,CAAd;EAAA,GAAnB,CAAP;EACH;;ECAD,IAAMI,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAhB;EACAF,OAAO,CAACG,GAAR,GAAcC,MAAM,CAACC,SAAP,CAAiBC,MAAjB,CAAwB,mBAAxB,CAAd;;EACAN,OAAO,CAACO,MAAR,GAAiB;EAAA,SAAMP,OAAO,CAACQ,MAAR,EAAN;EAAA,CAAjB;;EACAP,QAAQ,CAACQ,eAAT,CAAyBC,WAAzB,CAAqCV,OAArC;EAEA,IAAMW,MAAM,GAAGV,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAf;EACAS,MAAM,CAACC,GAAP,GAAa,YAAb;EACAD,MAAM,CAACE,IAAP,GAAc,UAAd;EACAF,MAAM,CAACG,IAAP,GAAcV,MAAM,CAACC,SAAP,CAAiBC,MAAjB,CAAwB,oBAAxB,CAAd;EACAX,KAAK,GAAGoB,IAAR,CAAa;EAAA,SAAMd,QAAQ,CAACe,IAAT,CAAcN,WAAd,CAA0BC,MAA1B,CAAN;EAAA,CAAb;;;;"}