{"version":3,"file":"index.js","sources":["../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../node_modules/@babel/runtime/helpers/createClass.js","../share/constant.js","dev/index.js"],"sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","export const START = 'start';\nexport const STOP = 'stop';\nexport const DANMU = 'danmu';\nexport const GIFT = 'gift';\nexport const GUARD = 'guard';\nexport const CONFIG = 'config';\nexport const RECORDING = 'recording';\nexport const DEBUG = 'debug';\nexport const LOG = 'log';\nexport const ERROR = 'error';\nexport const FAIL = 'fail';\nexport const RTMP = 'rtmp';\nexport const RECONNECT = 'reconnect';\nexport const STREAM_DISCONNECT = 'stream_disconnect';\nexport const BINARY_STREAM = 'binary_stream';\nexport const BLH = 'blh';\n\nexport const SOCKET_SUCCESS = '建立socket连接成功';\nexport const SOCKET_FAIL = '建立socket连接失败';\nexport const TAB_VIDEO_STREAM_SUCCESS = '获取标签视频流成功';\nexport const TAB_VIDEO_STREAM_FAIL = '无法获取标签视频流，请重试！';\nexport const RECORDER_SUCCESS = '录制器启动成功';\nexport const RECORDER_FAIL = '无法录制标签的视频流，请重试！';\nexport const PUSH_STREAM_ING = '正在推流中...';\nexport const CAN_NOT_FIND_TAB = '未获取到当前激活的标签';\nexport const RTMP_ERROR = '请输入正确的rtmp推流地址';\nexport const STREAM_NAME_ERROR = '请输入正确的直播码';\nexport const SOCKET_ERROR = '请输入正确的中转地址';\nexport const LIVE_ROOM_ERROR = '不是有效B站直播间地址';\nexport const OPEN_SUCCESS = '打开直播间页面成功';\nexport const CURRENT_PAGE = '当前页面';\nexport const PUSH_STREAM_END = '已停止推流...';\nexport const RECONNECT_INFO = '自动重连中：';\nexport const INJECTED_SUCCESS = '注入文件：';\n\nexport const DEFAULT_RTMP = 'rtmp://bvc.live-send.acg.tv/live-bvc/';\nexport const DEFAULT_SOCKET = 'http://localhost:8080';\nexport const DEFAULT_RESOLUTION = 720;\nexport const DEFAULT_VIDEO_BITSPER = 2500000;\nexport const DEFAULT_AUDIO_BITSPER = 128000;\nexport const MIME_TYPE = 'video/webm; codecs=\"h264, opus\"';\nexport const RECONNECT_TIME = 100;\nexport const MAX_DANMU = 50;\n\nexport const REG_RTMP = /^rtmp:\\/\\/.+/i;\nexport const REG_HTTP = /^https?:\\/\\/.+/i;\nexport const REG_LIVE = /^https?:\\/\\/live\\.bilibili\\.com/i;\n","import './index.scss';\nimport { DANMU, GIFT, GUARD, MAX_DANMU } from '../../share/constant';\n\nfunction query(el, doc = document) {\n    return doc.querySelector(el);\n}\n\nclass Content {\n    constructor() {\n        const $danmuku = query('.blh-danmuku');\n        if (!$danmuku) {\n            this.createUI();\n            this.eventBind();\n            this.receiveDanmu();\n        } else {\n            query('.blh-danmu-inner', $danmuku).innerHTML = '';\n            query('.blh-gift-inner', $danmuku).innerHTML = '';\n        }\n    }\n\n    createUI() {\n        this.manifest = chrome.runtime.getManifest();\n        this.$danmuku = document.createElement('div');\n        this.$danmuku.classList.add('blh-danmuku');\n        this.$danmuku.innerHTML = `\n            <div class=\"blh-header\">\n                <div class=\"blh-header-l\"></div>\n                <div class=\"blh-header-r\">×</div>\n            </div>\n            <div class=\"blh-danmu\">\n                <div class=\"blh-danmu-inner\"></div>\n            </div>\n            <div class=\"blh-gift\">\n                <div class=\"blh-gift-inner\"></div>\n            </div>\n            <div class=\"blh-footer\"></div>\n        `;\n        this.$headL = query('.blh-header-l', this.$danmuku);\n        this.$headR = query('.blh-header-r', this.$danmuku);\n        this.$danmu = query('.blh-danmu', this.$danmuku);\n        this.$danmuInner = query('.blh-danmu-inner', this.$danmuku);\n        this.$gift = query('.blh-gift', this.$danmuku);\n        this.$giftInner = query('.blh-gift-inner', this.$danmuku);\n        this.$footer = query('.blh-footer', this.$danmuku);\n        this.$headL.textContent = `${this.manifest.name} ${this.manifest.version}`;\n        document.body.appendChild(this.$danmuku);\n\n        this.$icon = document.createElement('div');\n        this.$icon.classList.add('blh-danmuku-icon');\n        this.$icon.textContent = '弹';\n        document.body.appendChild(this.$icon);\n    }\n\n    eventBind() {\n        let isHeadDroging = false;\n        let isFootDroging = false;\n        let lastPageX = 0;\n        let lastPageY = 0;\n        let lastLeft = 0;\n        let lastTop = 0;\n        let lastHeight = 0;\n\n        this.$headL.addEventListener('mousedown', event => {\n            isHeadDroging = true;\n            lastPageX = event.pageX;\n            lastPageY = event.pageY;\n            lastLeft = this.$danmuku.offsetLeft;\n            lastTop = this.$danmuku.offsetTop;\n        });\n\n        this.$footer.addEventListener('mousedown', event => {\n            isFootDroging = true;\n            lastPageY = event.pageY;\n            lastHeight = this.$danmu.clientHeight;\n        });\n\n        document.addEventListener('mousemove', event => {\n            if (isHeadDroging) {\n                const x = event.pageX - lastPageX;\n                const y = event.pageY - lastPageY;\n                this.$danmuku.style.transform = `translate(${x}px, ${y}px)`;\n            }\n\n            if (isFootDroging) {\n                const height = lastHeight + event.pageY - lastPageY;\n                if (height >= 100) {\n                    this.$danmu.style.height = `${height}px`;\n                } else {\n                    isFootDroging = false;\n                }\n            }\n\n            if (event.composedPath().indexOf(this.$danmuku) > -1) {\n                this.isHover = true;\n            } else {\n                this.isHover = false;\n            }\n        });\n\n        document.addEventListener('mouseup', event => {\n            if (isHeadDroging) {\n                isHeadDroging = false;\n                this.$danmuku.style.transform = 'translate(0, 0)';\n                const x = lastLeft + event.pageX - lastPageX;\n                const y = lastTop + event.pageY - lastPageY;\n                this.$danmuku.style.left = `${x}px`;\n                this.$danmuku.style.top = `${y}px`;\n            }\n\n            if (isFootDroging) {\n                isFootDroging = false;\n            }\n        });\n\n        this.$headR.addEventListener('click', () => {\n            this.$danmuku.style.display = 'none';\n            this.$icon.style.display = 'block';\n        });\n\n        this.$icon.addEventListener('click', () => {\n            this.$danmuku.style.display = 'block';\n            this.$icon.style.display = 'none';\n        });\n    }\n\n    addDanmu(danmu) {\n        const { children } = this.$danmuInner;\n        if (children.length > MAX_DANMU) {\n            const child = children[0];\n            query('.blh-danmu-uname', child).innerText = `${danmu.uname}:`;\n            query('.blh-danmu-text', child).innerText = danmu.text;\n            this.$danmuInner.appendChild(child);\n        } else {\n            this.$danmuInner.insertAdjacentHTML(\n                'beforeend',\n                `\n                <div class=\"blh-danmu-item\">\n                    <span class=\"blh-danmu-uname\">${danmu.uname}:</span>\n                    <span class=\"blh-danmu-text\">${danmu.text}</span>\n                </div>\n            `,\n            );\n        }\n        if (!this.isHover) {\n            clearTimeout(this.danmuTimer);\n            this.danmuTimer = setTimeout(() => {\n                this.$danmu.scrollTo(0, this.$danmu.scrollHeight);\n            }, 100);\n        }\n    }\n\n    addGift(gift) {\n        const { children } = this.$giftInner;\n        if (children.length > MAX_DANMU) {\n            const child = children[0];\n            query('.blh-gift-uname', child).innerText = `${gift.uname}:`;\n            query('.blh-gift-text', child).innerText = `${gift.action} ${gift.gift} ${gift.count}`;\n            this.$giftInner.appendChild(child);\n        } else {\n            this.$giftInner.insertAdjacentHTML(\n                'beforeend',\n                `\n                <div class=\"blh-gift-item\">\n                    <span class=\"blh-gift-uname\">${gift.uname}:</span>\n                    <span class=\"blh-gift-text\">${gift.action} ${gift.gift} ${gift.count}</span>\n                </div>\n            `,\n            );\n        }\n        if (!this.isHover) {\n            clearTimeout(this.giftTimer);\n            this.giftTimer = setTimeout(() => {\n                this.$gift.scrollTo(0, this.$gift.scrollHeight);\n            }, 100);\n        }\n    }\n\n    receiveDanmu() {\n        if (!chrome) return;\n        chrome.runtime.onMessage.addListener(request => {\n            const { type, data } = request;\n            window.postMessage(request);\n            switch (type) {\n                case DANMU:\n                    this.addDanmu(data);\n                    break;\n                case GIFT:\n                case GUARD:\n                    this.addGift(data);\n                    break;\n                default:\n                    break;\n            }\n        });\n    }\n}\n\nexport default new Content();\n"],"names":["DANMU","GIFT","GUARD","MAX_DANMU","query","el","doc","document","querySelector","Content","$danmuku","createUI","eventBind","receiveDanmu","innerHTML","manifest","chrome","runtime","getManifest","createElement","classList","add","$headL","$headR","$danmu","$danmuInner","$gift","$giftInner","$footer","textContent","name","version","body","appendChild","$icon","isHeadDroging","isFootDroging","lastPageX","lastPageY","lastLeft","lastTop","lastHeight","addEventListener","event","pageX","pageY","offsetLeft","offsetTop","clientHeight","x","y","style","transform","height","composedPath","indexOf","isHover","left","top","display","danmu","children","length","child","innerText","uname","text","insertAdjacentHTML","clearTimeout","danmuTimer","setTimeout","scrollTo","scrollHeight","gift","action","count","giftTimer","onMessage","addListener","request","type","data","window","postMessage","addDanmu","addGift"],"mappings":"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"}