{"version":3,"file":"index.js","sources":["../../node_modules/_@babel_runtime@7.7.4@@babel/runtime/helpers/classCallCheck.js","../../node_modules/_@babel_runtime@7.7.4@@babel/runtime/helpers/createClass.js","dev/index.js"],"sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","class Injected {\n    constructor() {\n        this.getPlayer().then(player => {\n            const { add } = player.components.danmaku;\n            player.components.danmaku.add = function f(...arg) {\n                const result = add.call(this, ...arg);\n                window.postMessage({\n                    type: 'danmu',\n                    data: arg[0],\n                });\n                return result;\n            };\n        });\n    }\n\n    getPlayer() {\n        return new Promise(resolve => {\n            (function loop() {\n                if (!window.EmbedPlayer || !window.EmbedPlayer.playerInstance) {\n                    setTimeout(loop, 1000);\n                } else if (window.EmbedPlayer.playerInstance.play) {\n                    const instance = window.EmbedPlayer.playerInstance.play();\n                    resolve(instance);\n                } else {\n                    setTimeout(loop, 1000);\n                }\n            })();\n        });\n    }\n}\n\nexport default new Injected();\n"],"names":["Injected","getPlayer","then","player","add","components","danmaku","f","arg","result","call","window","postMessage","type","data","Promise","resolve","loop","EmbedPlayer","playerInstance","setTimeout","play","instance"],"mappings":";;;EAAA,SAAS,eAAe,CAAC,QAAQ,EAAE,WAAW,EAAE;IAC9C,IAAI,EAAE,QAAQ,YAAY,WAAW,CAAC,EAAE;MACtC,MAAM,IAAI,SAAS,CAAC,mCAAmC,CAAC,CAAC;KAC1D;GACF;;EAED,kBAAc,GAAG,eAAe;;ECNhC,SAAS,iBAAiB,CAAC,MAAM,EAAE,KAAK,EAAE;IACxC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;MACrC,IAAI,UAAU,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;MAC1B,UAAU,CAAC,UAAU,GAAG,UAAU,CAAC,UAAU,IAAI,KAAK,CAAC;MACvD,UAAU,CAAC,YAAY,GAAG,IAAI,CAAC;MAC/B,IAAI,OAAO,IAAI,UAAU,EAAE,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC;MACtD,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,UAAU,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;KAC3D;GACF;;EAED,SAAS,YAAY,CAAC,WAAW,EAAE,UAAU,EAAE,WAAW,EAAE;IAC1D,IAAI,UAAU,EAAE,iBAAiB,CAAC,WAAW,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;IACrE,IAAI,WAAW,EAAE,iBAAiB,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;IAC7D,OAAO,WAAW,CAAC;GACpB;;EAED,eAAc,GAAG,YAAY;;MChBvBA;;;EACF,sBAAc;EAAA;;EACV,SAAKC,SAAL,GAAiBC,IAAjB,CAAsB,UAAAC,MAAM,EAAI;EAAA,UACpBC,GADoB,GACZD,MAAM,CAACE,UAAP,CAAkBC,OADN,CACpBF,GADoB;;EAE5BD,MAAAA,MAAM,CAACE,UAAP,CAAkBC,OAAlB,CAA0BF,GAA1B,GAAgC,SAASG,CAAT,GAAmB;EAAA,0CAALC,GAAK;EAALA,UAAAA,GAAK;EAAA;;EAC/C,YAAMC,MAAM,GAAGL,GAAG,CAACM,IAAJ,OAAAN,GAAG,GAAM,IAAN,SAAeI,GAAf,EAAlB;EACAG,QAAAA,MAAM,CAACC,WAAP,CAAmB;EACfC,UAAAA,IAAI,EAAE,OADS;EAEfC,UAAAA,IAAI,EAAEN,GAAG,CAAC,CAAD;EAFM,SAAnB;EAIA,eAAOC,MAAP;EACH,OAPD;EAQH,KAVD;EAWH;;;;kCAEW;EACR,aAAO,IAAIM,OAAJ,CAAY,UAAAC,OAAO,EAAI;EAC1B,SAAC,SAASC,IAAT,GAAgB;EACb,cAAI,CAACN,MAAM,CAACO,WAAR,IAAuB,CAACP,MAAM,CAACO,WAAP,CAAmBC,cAA/C,EAA+D;EAC3DC,YAAAA,UAAU,CAACH,IAAD,EAAO,IAAP,CAAV;EACH,WAFD,MAEO,IAAIN,MAAM,CAACO,WAAP,CAAmBC,cAAnB,CAAkCE,IAAtC,EAA4C;EAC/C,gBAAMC,QAAQ,GAAGX,MAAM,CAACO,WAAP,CAAmBC,cAAnB,CAAkCE,IAAlC,EAAjB;EACAL,YAAAA,OAAO,CAACM,QAAD,CAAP;EACH,WAHM,MAGA;EACHF,YAAAA,UAAU,CAACH,IAAD,EAAO,IAAP,CAAV;EACH;EACJ,SATD;EAUH,OAXM,CAAP;EAYH;;;;;;AAGL,cAAe,IAAIjB,QAAJ,EAAf;;;;;;;;"}